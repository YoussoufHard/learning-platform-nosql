<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Inscription - Enrôlement</title>
  <!-- Inclusion de Bootstrap pour le design -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script>
    // Fonction pour créer une inscription
    async function createEnrollment() {
      const response = await fetch('/enrollments', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          studentId: document.getElementById('studentId').value,
          courseId: document.getElementById('courseId').value,
          enrollmentDate: document.getElementById('enrollmentDate').value
        })
      });
      const data = await response.json();
      document.getElementById('result').innerHTML = `<p>Inscription créée pour l'étudiant ID: ${data.studentId} au cours ID: ${data.courseId}</p>`;
    }

    // Fonction pour récupérer toutes les inscriptions
    async function getAllEnrollments() {
      const response = await fetch('/enrollments');
      const data = await response.json();
      let enrollmentList = '<ul>';
      data.forEach(enrollment => {
        enrollmentList += `<li>Étudiant ID: ${enrollment.studentId} - Cours ID: ${enrollment.courseId} - Date d\'inscription: ${enrollment.enrollmentDate}</li>`;
      });
      enrollmentList += '</ul>';
      document.getElementById('result').innerHTML = enrollmentList;
    }

    // Fonction pour mettre à jour une inscription
    async function updateEnrollment() {
      const enrollmentId = document.getElementById('enrollmentId').value;
      const response = await fetch(`/enrollments/${enrollmentId}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          enrollmentDate: document.getElementById('newEnrollmentDate').value
        })
      });
      const data = await response.json();
      document.getElementById('result').innerHTML = `<p>Inscription mise à jour : Étudiant ID: ${data.studentId}, Cours ID: ${data.courseId}</p>`;
    }

    // Fonction pour supprimer une inscription
    async function deleteEnrollment() {
      const enrollmentId = document.getElementById('enrollmentId').value;
      const response = await fetch(`/enrollments/${enrollmentId}`, { method: 'DELETE' });
      const data = await response.json();
      document.getElementById('result').innerHTML = `<p>Inscription supprimée pour l'étudiant ID: ${data.studentId}</p>`;
    }
  </script>
</head>
<body>
  <div class="container mt-4">
    <h1 class="text-center mb-4">Test Inscription - Enrôlement</h1>

    <!-- Formulaire pour ajouter une inscription -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Créer une inscription</h5>
        <form>
          <div class="form-group">
            <label for="studentId">ID de l'étudiant</label>
            <input type="text" class="form-control" id="studentId" placeholder="ID de l'étudiant" required>
          </div>
          <div class="form-group">
            <label for="courseId">ID du cours</label>
            <input type="text" class="form-control" id="courseId" placeholder="ID du cours" required>
          </div>
          <div class="form-group">
            <label for="enrollmentDate">Date d'inscription</label>
            <input type="date" class="form-control" id="enrollmentDate" required>
          </div>
          <button type="button" class="btn btn-primary" onclick="createEnrollment()">Créer l'inscription</button>
        </form>
      </div>
    </div>

    <!-- Bouton pour récupérer toutes les inscriptions -->
    <button class="btn btn-info mb-4" onclick="getAllEnrollments()">Voir toutes les inscriptions</button>

    <!-- Formulaire pour mettre à jour une inscription -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Mettre à jour une inscription</h5>
        <form>
          <div class="form-group">
            <label for="enrollmentId">ID de l'inscription</label>
            <input type="text" class="form-control" id="enrollmentId" placeholder="ID de l'inscription" required>
          </div>
          <div class="form-group">
            <label for="newEnrollmentDate">Nouvelle date d'inscription</label>
            <input type="date" class="form-control" id="newEnrollmentDate" required>
          </div>
          <button type="button" class="btn btn-warning" onclick="updateEnrollment()">Mettre à jour l'inscription</button>
        </form>
      </div>
    </div>

    <!-- Formulaire pour supprimer une inscription -->
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Supprimer une inscription</h5>
        <form>
          <div class="form-group">
            <label for="enrollmentId">ID de l'inscription</label>
            <input type="text" class="form-control" id="enrollmentId" placeholder="ID de l'inscription" required>
          </div>
          <button type="button" class="btn btn-danger" onclick="deleteEnrollment()">Supprimer l'inscription</button>
        </form>
      </div>
    </div>

    <!-- Résultats des actions -->
    <div id="result" class="mt-4"></div>
  </div>

  <!-- Inclusion des scripts Bootstrap -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
